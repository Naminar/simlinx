- instruction: csrrw 
  decode: |
    decodedInstr.rs1 = RS1;
    decodedInstr.rd = RD;
    decodedInstr.csr = CSR;
  execute: |
    if (core.regs[rd] == 0) {
        core.CSRs[csr] = core.regs[rs1];
        (curI + 1)->exec(core, bbsI, curI + 1);
        return;
        //return Fault::NO_FAULT;    
    }

    reg_t tmp = core.CSRs[csr];
    core.CSRs[csr] = core.regs[rs1];
    core.regs[rd] = tmp;


- instruction: csrrs
  decode: |
    decodedInstr.rs1 = RS1;
    decodedInstr.rd = RD;
    decodedInstr.csr = CSR;
  execute: |
    reg_t tmp = core.CSRs[csr];
    core.CSRs[csr] = tmp | core.regs[rs1];
    core.regs[rd] = tmp;


- instruction: csrrc
  decode: |
    decodedInstr.rs1 = RS1;
    decodedInstr.rd = RD;
    decodedInstr.csr = CSR;
  execute: |
    reg_t tmp = core.CSRs[csr];
    core.CSRs[csr] = tmp & ~core.regs[rs1];
    core.regs[rd] = tmp;


- instruction: csrrwi
  decode: |
    decodedInstr.imm = ZIMM;
    decodedInstr.rd = RD;
    decodedInstr.csr = CSR;
  execute: |
    /*if (isntr.rd != 0)*/
    core.regs[rd] = core.CSRs[csr];
    core.CSRs[csr] = imm;


- instruction: csrrsi
  decode: |
    decodedInstr.imm = ZIMM;
    decodedInstr.rd = RD;
    decodedInstr.csr = CSR;
  execute: |
    reg_t tmp = core.CSRs[csr];
    core.CSRs[csr] = tmp | imm;
    core.regs[rd] = tmp;


- instruction: csrrci
  decode: |
    decodedInstr.imm = ZIMM;
    decodedInstr.rd = RD;
    decodedInstr.csr = CSR;
  execute: |
    reg_t tmp = core.CSRs[csr];
    core.CSRs[csr] = tmp & ~imm;
    core.regs[rd] = tmp;